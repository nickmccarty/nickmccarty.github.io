<!doctype html>
<html lang="en" data-bs-theme="auto">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YT69KZ91W7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-YT69KZ91W7');
    </script>
    <script src="../assets/js/color-modes.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Trending Tickers Flask App Write-Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Clipboard.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/images/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/images/favicon-32x32.png">
    <link rel="stylesheet" href="../assets/css/styles.css">
    <!-- Owl Carousel CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">

  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js" charset="utf-8"></script>
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script src="https://unpkg.com/d3-cloud@1.2.6/build/d3.layout.cloud.js"></script>
  <!-- jQuery (required for Owl Carousel) -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <!-- Owl Carousel JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
  </head>
  <body>
    <div class="container-fluid p-0" style="overflow: hidden;">
      <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
        <symbol id="check2" viewBox="0 0 16 16">
          <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
        </symbol>
        <symbol id="circle-half" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
        </symbol>
        <symbol id="moon-stars-fill" viewBox="0 0 16 16">
          <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
          <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
        </symbol>
        <symbol id="sun-fill" viewBox="0 0 16 16">
          <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </symbol>
      </svg>
      <div id = "color-mode-toggle" class="dropdown position-fixed bottom-0 start-0 bd-mode-toggle">
          <button class="btn btn-bd-primary py-2 dropdown-toggle d-flex align-items-center"
                  id="bd-theme"
                  type="button"
                  aria-expanded="false"
                  data-bs-toggle="dropdown"
                  aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active" width="1em" height="1em"><use href="#circle-half"></use></svg>
            <span class="visually-hidden" id="bd-theme-text">Toggle theme</span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="bd-theme-text">
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg>
              </button>
            </li>
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg>
              </button>
            </li>
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 opacity-50 theme-icon" width="1em" height="1em"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none" width="1em" height="1em"><use href="#check2"></use></svg>
              </button>
            </li>
          </ul>
      </div>
      <header data-bs-theme="auto">
          <div class="collapse text-bg-auto" id="navbarHeader">
            <div class="container">
              <div class="row">
                <div class="col-sm-8 col-md-7 py-4">
                  <a class="nav-item nav-link" href="./contact.html" style="text-decoration: none; text-decoration-color: none;">
                    <h4 class="gradient">Contact</h4>
                  </a>
                  <div style="padding-left: 5px">
                    <a href="https://linkedin.com/in/nicholasmccarty" class="text-auto" style="text-decoration: none;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">
                        <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401m-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4"/>
                      </svg>
                    </a>
                    <a href="https://github.com/nickmccarty" class="text-auto" style="text-decoration: none;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
                      </svg>
                    </a>
                    <a href="mailto:nickmccarty0@gmail.com" class="text-auto" style="text-decoration: none;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
                        <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z"/>
                      </svg>
                    </a>
                    <a href="https://discord.com/invite/NbQ9ucMjzd">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-discord" viewBox="0 0 16 16">
                            <path d="M13.545 2.907a13.2 13.2 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.2 12.2 0 0 0-3.658 0 8 8 0 0 0-.412-.833.05.05 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.04.04 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032q.003.022.021.037a13.3 13.3 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019q.463-.63.818-1.329a.05.05 0 0 0-.01-.059l-.018-.011a9 9 0 0 1-1.248-.595.05.05 0 0 1-.02-.066l.015-.019q.127-.095.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.05.05 0 0 1 .053.007q.121.1.248.195a.05.05 0 0 1-.004.085 8 8 0 0 1-1.249.594.05.05 0 0 0-.03.03.05.05 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.2 13.2 0 0 0 4.001-2.02.05.05 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.03.03 0 0 0-.02-.019m-8.198 7.307c-.789 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612m5.316 0c-.788 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612"/>
                        </svg>
                    </a>
                  </div>
                </div>
                <div class="col-sm-4 offset-md-1 py-4 gradient">
                  <a class="nav-item nav-link" href="../" style="text-decoration: none; text-decoration-color: none;">
                    <h4>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                        <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
                      </svg>
                    </h4>
                  </a>
                  <a class="nav-item nav-link" href="../about.html" style="text-decoration: none; text-decoration-color: none;">
                    <h4>About</h4>
                  </a>
                  <a class="nav-item nav-link" href="../projects.html" style="text-decoration: none; text-decoration-color: none;">
                    <h4>Projects</h4>
                  </a>
                </div>
              </div>
            </div>
          </div>
          <div class="navbar bg-auto shadow-sm">
            <div class="container">
              <a href="../blog/posts/web-development.html" class="navbar-brand d-flex align-items-center gradient">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-bar-left" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M12.5 15a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 1 0v13a.5.5 0 0 1-.5.5M10 8a.5.5 0 0 1-.5.5H3.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L3.707 7.5H9.5a.5.5 0 0 1 .5.5"/>
                </svg>
              </a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
          </div>
      </header>
      <main>
          <!-- Page content-->
        <div id = "article" class="container" style="padding-top: 40px;">
          <div class="row justify-content-center">
              <!-- Blog entries-->
              <div class="col-lg-8">
                  <!-- Featured blog post-->
                  <div class="card mb-4">
                      <img class="card-img-top" src="../assets/images/candlestick-chart-plotter-screenshot.jpg"></img>
                  </div>
              </div>
          </div>
          <hr>
          <h1 class="card-title gradient">Exploring Technical Analysis with Flask: A Dynamic Learning Experience</h1>
          <p class="card-text">Demonstrating the Utility of Technical Analysis with an Interactive Web App</p>
          <div class="small text-muted">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar" viewBox="0 0 16 16">
              <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
            </svg>
            January 3, 2024
          </div>
          <div id = "readingTime" class="small text-muted"></div>
          <span class="badge rounded-pill bg-info text-dark">Web App</span>
          <span class="badge rounded-pill bg-info text-dark">Flask</span>
          <span class="badge rounded-pill bg-info text-dark">AWS</span>
          <hr>
          <div class="jumbotron-fluid gradient">
            <h6>Table of Contents</h6>
            <ol>
              <a href="#introduction-and-motivation">
                <li>
                  Introduction & Motivation
                </li>
              </a>
              <a href="#tech-stack-and-workflow">
                <li>
                  Tech Stack & Workflow
                </li>
              </a>
              <a href="#project-setup">
                <li>
                  Project Setup
                </li>
              </a>
              <a href="#implementation-details">
                <li>
                  Implementation Details
                </li>
              </a>
              <a href="#results">
                <li>
                  Results
                </li>
              </a>
              <a href="#lessons-learned-and-future-work">
                <li>
                  Lessons Learned & Future Work
                </li>
              </a>
              <a href="#conclusion">
                <li>
                  Conclusion
                </li>
              </a>
            </ol>
            <!-- <a class="btn btn-primary btn-outline-secondary gradient mb-1" href="https://github.com/nickmccarty/dall-e-image-generator">Show Me the Code! 
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
              </svg>
            </a> -->
            <!-- <a target="_blank" href="https://colab.research.google.com/drive/1_Ex9MR6Jw41Vii8K2T6w2PqSuniTkXlq?usp=sharing%3Fusp%3Dsharing%3Fusp%3Dsharing#offline=true&sandboxMode=true">
              <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/>
            </a> -->
            <a target="_blank" href="http://candlestick-chart-plotter.us-west-1.elasticbeanstalk.com/">
              <img src="https://img.shields.io/static/v1?label=Live&message=Demo&labelColor=2f363d&color=purple" alt="">
            </a> 
            <!-- <a href="https://colab.research.google.com/drive/1_Ex9MR6Jw41Vii8K2T6w2PqSuniTkXlq?usp=sharing?usp=sharing%3Fusp%3Dsharing#offline=true&sandboxMode=true", style="text-decoration: none;" target="_blank">
              <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/>
            </a> -->
          </div>
          <hr>
          <h4 id = "introduction-and-motivation" class="gradient">Introduction & Motivation</h4>
          <p>
            I developed this Flask web app to transform technical analysis into
            an interactive, dynamic experience. Additionally, it serves as a template
            for anyone with the desire and willingness to develop additional functionality.
            I've been asked many times over the years how to build a dynamic web
            application like the one described here, so I have recruited the assistance of Gumroad
            to sell the codebase (as seen in the demo link provided above) to anyone interested.
          </p>
          <br>
          <h4 id = "tech-stack-and-workflow" class="gradient">Tech Stack & Workflow</h4>
          <p>
            <div class="jumbotron-container justify-content-center text-center mt-4 mb-4 d-flex align-items-center" style="height: 100px; background-color: white;">
              <img class = "img-fluid" src="../assets/images/candlestick-chart-flow-diagram.png" alt="">
            </div>
            The project leverages the <code>yfinance</code> library to fetch historical stock data and <code>Plotly</code> for creating interactive and visually appealing charts. The workflow is relatively straightforward, centered on fetching the data, calculating Bollinger Bands, and plotting the results. The candlestick chart, accompanied by upper and lower Bollinger Bands, provides a visual contextualization of the stock's price movements.
          </p>
          <p>
            As for the web app, the following dependencies are utilized:
            <pre>
              <code>
                Flask==2.3.3
                plotly==5.18.0
                beautifulsoup4==4.12.2
                yfinance==0.2.35
                pandas==2.1.1
              </code>
            </pre>
          </p>
          <h4 id = "project-setup" class="gradient">Project Setup</h4>
          <p>
            The directory structure of the app is shown below:
            <pre>
              <code>
                app.zip
                ├── templates
                │   ├── index.html
                │   ├── plot.html
                ├── requirements.txt
                └── application.py
              </code>
            </pre>
            The dependencies that were laid out in the previous section comprise the entirety of the <code>requirements.txt</code> file. That file is used as the basis for what will be included in our app's environment upon deployment. The demo was deployed to AWS using Elastic Beanstalk, as you may have surmised from the URL, so the naming conventions used in the file names are geared toward that environment (<code>application.py</code> is used instead of the conventional <code>app.py</code>). It may seem like an overly-tedious detail, but using the latter over the former would cause the deployment to fail.
          </p>
          <br>
          <h4 id = "implementation-details" class="gradient">Implementation Details</h4>
          <p>
            This is the application logic, which lives in the <code>application.py</code> file:
          </p>
          <div class="row justify-content-center">
            <div class="col-10 position-relative">
              <pre class="m-0 p-0">
                <code id = 'codeSnippet' class="m-0 p-0 python">
                  from flask import Flask, render_template, request
                  import yfinance as yf
                  import plotly.graph_objects as go
                  from datetime import datetime
                  from datetime import timedelta
                  import pandas as pd
                  from bs4 import BeautifulSoup
                  from plotly.subplots import make_subplots

                  application = Flask(__name__)

                  @application.route('/')
                  def index():
                      # Replace 'your_url_here' with the actual URL
                      url = 'https://finance.yahoo.com/lookup/'

                      # Use pandas read_html function to read tables from the URL
                      tables = pd.read_html(url)

                      # Assuming the table you want is the first one, you can access it like this:
                      df = tables[0]

                      # Render the ticker symbols as clickable pill badges
                      pill_badges = [f'<a href="/plot/{symbol[0]}"><span class="badge badge-pill badge-info">{symbol[0] + " " + symbol[1]}</span></a>' for symbol in zip(df['Symbol'], df['% Change'])]

                      return render_template('index.html', pill_badges=pill_badges)

                  @application.route('/plot', methods=['POST'])
                  def plot():
                      stock_symbol = request.form['symbol']
                      start_date = request.form['start_date']
                      end_date = request.form['end_date']

                      # Convert start and end dates to Unix timestamps
                      start_timestamp = int(datetime.strptime(start_date, "%Y-%m-%d").timestamp())
                      end_timestamp = int(datetime.strptime(end_date, "%Y-%m-%d").timestamp())

                      # Build the Yahoo finance URL with the selected parameters
                      url = f'https://query1.finance.yahoo.com/v7/finance/download/{stock_symbol}?period1={start_timestamp}&period2={end_timestamp}&interval=1d&events=history'

                      # Fetch stock data using yfinance
                      stock_data = yf.download(stock_symbol, start=start_date, end=end_date)

                      # Resample the data with daily frequency to fill in missing dates
                      # stock_data = stock_data.resample('D').ffill()

                      # Calculate Bollinger Bands
                      stock_data['MA20'] = stock_data['Adj Close'].rolling(window=20).mean()
                      stock_data['Upper'] = stock_data['MA20'] + 2 * stock_data['Adj Close'].rolling(window=20).std()
                      stock_data['Lower'] = stock_data['MA20'] - 2 * stock_data['Adj Close'].rolling(window=20).std()

                      # Additional Bollinger Bands corresponding to 1SD
                      stock_data['Upper_1SD'] = stock_data['MA20'] + stock_data['Adj Close'].rolling(window=20).std()
                      stock_data['Lower_1SD'] = stock_data['MA20'] - stock_data['Adj Close'].rolling(window=20).std()

                      # Create a candlestick chart with Bollinger Bands
                      # and volume sub-plot 
                      fig = make_subplots(rows=2, cols=1, shared_xaxes=True, 
                                vertical_spacing=0.01, 
                                row_width=[0.2, 0.8])

                      # Candlestick trace
                      fig.add_trace(go.Candlestick(x=stock_data.index,
                                      open=stock_data['Open'],
                                      high=stock_data['High'],
                                      low=stock_data['Low'],
                                      close=stock_data['Adj Close'], name='Candlestick'),
                                      row=1, col=1)

                      # Bollinger Bands traces
                      fig.add_trace(go.Scatter(x=stock_data.index, y=stock_data['Upper'], mode='lines', line=dict(color='red'), name='SMA(20) + 2 SD'))
                      fig.add_trace(go.Scatter(x=stock_data.index, y=stock_data['Lower'], mode='lines', line=dict(color='green'), name='SMA(20) - 2 SD'))

                      # Additional Bollinger Bands traces for 1SD
                      fig.add_trace(go.Scatter(x=stock_data.index, y=stock_data['Upper_1SD'], mode='lines', line=dict(color='orange'), name='SMA(20) + 1 SD'))
                      fig.add_trace(go.Scatter(x=stock_data.index, y=stock_data['Lower_1SD'], mode='lines', line=dict(color='orange'), name='SMA(20) - 1 SD'))

                      fig.add_trace(go.Bar(x=stock_data.index, y=stock_data['Volume'], showlegend=False), row=2, col=1)

                      # Customize the layout
                      fig.update_layout(title=f'{stock_symbol}',
                                      #   xaxis_title='Date',
                                        yaxis_title='Adj. Close',
                                        xaxis_rangeslider_visible=False,
                                        legend=dict(orientation='h', y=-0.25),
                                        paper_bgcolor="rgb(0,0,0,0)",
                                        font = dict(color = '#eeeeee'),
                                        margin={'l': 0})

                      # Save the chart as HTML file
                      chart_html = fig.to_html(full_html=False)

                      return render_template('plot.html', chart_html=chart_html)

                  @application.route('/plot/<symbol>')
                  def plot_ticker(symbol):
                      # Fetch stock data using yfinance for the last 12 months
                      end_date = datetime.now().strftime('%Y-%m-%d')
                      start_date = (datetime.now() - timedelta(days=365)).strftime('%Y-%m-%d')

                      stock_data = yf.download(symbol, start=start_date, end=end_date)

                      # Get the company name from the lookup table
                      url = 'https://finance.yahoo.com/lookup/'
                      tables = pd.read_html(url)
                      df = tables[0]
                      company_name = df[df['Symbol'] == symbol]['Name'].values[0]

                      # Calculate Bollinger Bands
                      stock_data['MA20'] = stock_data['Adj Close'].rolling(window=20).mean()
                      stock_data['Upper'] = stock_data['MA20'] + 2 * stock_data['Adj Close'].rolling(window=20).std()
                      stock_data['Lower'] = stock_data['MA20'] - 2 * stock_data['Adj Close'].rolling(window=20).std()

                      # Additional Bollinger Bands corresponding to 1SD
                      stock_data['Upper_1SD'] = stock_data['MA20'] + stock_data['Adj Close'].rolling(window=20).std()
                      stock_data['Lower_1SD'] = stock_data['MA20'] - stock_data['Adj Close'].rolling(window=20).std()
                      
                      # Create a candlestick chart with Bollinger Bands
                      # and volume sub-plot 
                      fig = make_subplots(rows=2, cols=1, shared_xaxes=True, 
                                vertical_spacing=0.01, 
                                row_width=[0.2, 0.8])

                      # Candlestick trace
                      fig.add_trace(go.Candlestick(x=stock_data.index,
                                      open=stock_data['Open'],
                                      high=stock_data['High'],
                                      low=stock_data['Low'],
                                      close=stock_data['Adj Close'], name='Candlestick'),
                                      row=1, col=1)

                      # Bollinger Bands traces
                      fig.add_trace(go.Scatter(x=stock_data.index, y=stock_data['Upper'], mode='lines', line=dict(color='red'), name='SMA(20) + 2 SD'))
                      fig.add_trace(go.Scatter(x=stock_data.index, y=stock_data['Lower'], mode='lines', line=dict(color='green'), name='SMA(20) - 2 SD'))

                      # Additional Bollinger Bands traces for 1SD
                      fig.add_trace(go.Scatter(x=stock_data.index, y=stock_data['Upper_1SD'], mode='lines', line=dict(color='orange'), name='SMA(20) + 1 SD'))
                      fig.add_trace(go.Scatter(x=stock_data.index, y=stock_data['Lower_1SD'], mode='lines', line=dict(color='orange'), name='SMA(20) - 1 SD'))

                      fig.add_trace(go.Bar(x=stock_data.index, y=stock_data['Volume'], showlegend=False), row=2, col=1)
                      
                      # Customize the layout
                      fig.update_layout(title=f'{company_name}',
                                      #   xaxis_title='Date',
                                        yaxis_title='Adj. Close',
                                        xaxis_rangeslider_visible=False,
                                        legend=dict(orientation='h', y=-0.25),
                                        paper_bgcolor="rgb(0,0,0,0)",
                                        font = dict(color = '#eeeeee'),
                                        margin={'l': 0})

                      # Save the chart as HTML file
                      chart_html = fig.to_html(full_html=False)

                      return render_template('plot.html', chart_html=chart_html)

                  if __name__ == '__main__':
                      application.run(debug=True)

                </code>
              </pre>
              <p>

              </p>
              <button class="btn btn-outline-secondary position-absolute top-0 start-0 m-3 mt-4" id="copyButton" data-clipboard-target="#codeSnippet">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
                  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
                  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
                </svg>
              </button>
            </div>
          </div>
          <h4 id = "results" class="gradient">Results</h4>
          <p>
            <ul>
              <li class="mb-2">
                <b>Clickable Tickers:</b> Trending tickers are not just displayed; they are interactive. A simple click generates a detailed candlestick chart, providing insights into the selected ticker's performance.
              </li>
              <li class="mb-2">
                <b>Custom Chart Controls:</b> Users have the flexibility to enter a specific ticker symbol and date range, producing a personalized candlestick chart with overlaid Bollinger Bands. The interactive legend further empowers users to toggle specific bands on and off, tailoring their analysis.
              </li>
              <li class="mb-2">
                <b>Volume Insights:</b> Trading volume, a critical aspect of technical analysis, is presented in an interactive subplot. This additional layer of information enhances the depth of analysis and aids in making informed decisions.
              </li>
            </ul>
          </p>
          <br>
          <h4 id = "lessons-learned-and-future-work" class="gradient">Lessons Learned & Future Work</h4>
          <p>
            Through this project, we've reinforced the importance of robust data fetching and visualization. Lessons include the significance of parameter tuning for Bollinger Bands and ensuring a user-friendly interface for seamless interaction. Future work could involve refining the visualization, incorporating additional technical indicators, or building a user interface for broader accessibility.
          </p>
          <br>
          <h4 id = "conclusion" class="gradient">Conclusion</h4>
          <p>
            This Python script showcases a pragmatic approach to analyzing stock trends using Bollinger Bands. By combining data fetching, calculation, and visualization, the code provides a valuable tool for technical analysts and traders. The project's simplicity, coupled with the power of Python libraries, makes it an accessible and effective solution for understanding stock price movements.
          </p>      
      </div>
      <div class="lead text-center mb-5">
          <a class="btn btn-primary btn-outline-secondary gradient mt-4" target="_blank" href="https://nickmccarty.gumroad.com/l/candlestick-chart-flask-app">Sell Me the Code! 
            <!-- <img class = 'float-left' src="../assets/images/gumroad-logo.png" alt=""> -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart-plus" viewBox="0 0 16 16">
              <path d="M9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9z"/>
              <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
            </svg>
          </a>
          <a class="btn btn-primary btn-outline-secondary gradient mt-4" target="_blank" href="https://topmate.io/nickmccarty">Book Consultation
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-plus" viewBox="0 0 16 16">
              <path d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7"/>
              <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
            </svg>
          </a>
      </div>
      </main>
      <footer id = "footer" class="jumbotron-fluid"></footer>
      <p class="text-center mt-3 gradient">Made with <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
        <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15"/>
      </svg> and <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-code" viewBox="0 0 16 16">
        <path d="M5.854 4.854a.5.5 0 1 0-.708-.708l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L2.707 8l3.147-3.146zm4.292 0a.5.5 0 0 1 .708-.708l3.5 3.5a.5.5 0 0 1 0 .708l-3.5 3.5a.5.5 0 0 1-.708-.708L13.293 8l-3.147-3.146z"/>
      </svg> by Nick McCarty</p>
      <div class="text-center mb-3">
        <a href="https://linkedin.com/in/nicholasmccarty" class="text-auto" style="text-decoration: none;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">
            <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401m-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4"/>
          </svg>
        </a>
        <a href="https://github.com/nickmccarty" class="text-auto" style="text-decoration: none;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
          </svg>
        </a>
        <a href="mailto:nickmccarty0@gmail.com" class="text-auto" style="text-decoration: none;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16">
            <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z"/>
          </svg>
        </a>
        <a href="https://discord.com/invite/NbQ9ucMjzd">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-discord" viewBox="0 0 16 16">
              <path d="M13.545 2.907a13.2 13.2 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.2 12.2 0 0 0-3.658 0 8 8 0 0 0-.412-.833.05.05 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.04.04 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032q.003.022.021.037a13.3 13.3 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019q.463-.63.818-1.329a.05.05 0 0 0-.01-.059l-.018-.011a9 9 0 0 1-1.248-.595.05.05 0 0 1-.02-.066l.015-.019q.127-.095.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.05.05 0 0 1 .053.007q.121.1.248.195a.05.05 0 0 1-.004.085 8 8 0 0 1-1.249.594.05.05 0 0 0-.03.03.05.05 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.2 13.2 0 0 0 4.001-2.02.05.05 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.03.03 0 0 0-.02-.019m-8.198 7.307c-.789 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612m5.316 0c-.788 0-1.438-.724-1.438-1.612s.637-1.613 1.438-1.613c.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612"/>
          </svg>
        </a>
      </div>
    </div>    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="../assets/js/footer-animation.js"></script>
    <script src="../assets/js/reading-time-estimator.js"></script>
    <script src="../assets/js/clipboard.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>    
    <script src="https://cdn.jsdelivr.net/npm/@widgetbot/crate@3" async defer>
      new Crate({
        server: '1187450512451313714',
        channel: '1194441525946499222'
      })
    </script>
  </body>
</html>